#include "animation.h"


animation_t player_body_flashlight_idle = {
        .num_frames = 20,
        .frames = {
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_0.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_1.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_2.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_3.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_4.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_5.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_6.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_7.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_8.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_9.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_10.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_11.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_12.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_13.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_14.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_15.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_16.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_17.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_18.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/idle/survivor-idle_flashlight_19.png"},
        }
};

animation_t player_body_punch_walk = {
        .num_frames = 14,
        .frames = {
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_0.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_1.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_2.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_3.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_4.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_5.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_6.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_7.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_8.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_9.png"},
                {.action = true, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_10.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_11.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_12.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_13.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/meleeattack/survivor-meleeattack_flashlight_14.png"}
        }
};

animation_t player_body_flashlight_walk = {
        .num_frames = 20,
        .frames = {
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_0.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_1.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_2.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_3.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_4.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_5.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_6.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_7.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_8.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_9.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_10.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_11.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_12.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_13.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_14.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_15.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_16.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_17.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_18.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/flashlight/move/survivor-move_flashlight_19.png"},
        }
};

animation_t player_feet_idle = {
        .num_frames = 1,
        .frames = {
                {.action = false, .ticks = 1, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/idle/survivor-idle_0.png"}
        }
};

animation_t player_feet_walk = {
        .num_frames = 20,
        .frames = {
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_0.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_1.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_2.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_3.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_4.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_5.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_6.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_7.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_8.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_9.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_10.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_11.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_12.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_13.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_14.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_15.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_16.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_17.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_18.png"},
                {.action = false, .ticks = 5, .texture = NULL, .frame_file_name = "images/player/top-down-survivor/feet/walk/survivor-walk_19.png"},
        }
};

void animation_render(entity_t *entity, const animation_t *animation, animation_state_t *state, void (*action)())
{
    if (state->animation != animation) {
        state->animation = animation;
        state->frame = 0;
        state->tick = 0;
    }

    animation_frame_t frame = state->animation->frames[state->frame];

    if (state->tick > frame.ticks) {
        state->tick = 0;
        state->frame += 1;

        if (state->animation->num_frames <= state->frame) {
            state->frame = 0;
        }

        frame = state->animation->frames[state->frame];
    }


    if (frame.texture == NULL) {
        frame.texture = gf2d_sprite_load_image(frame.frame_file_name);
    }

    Vector2D size = {
            .x = frame.texture->frame_w,
            .y = frame.texture->frame_h,
    };

    draw_centered_around_player(
            frame.texture,
            size,
            entity->position,
            entity->has_color ? &entity->color : NULL,
            0,
            entity->roation - 90
    );

    if (frame.action) {
        if (action) {
            action();
        }
    }

    state->tick += 1;
}
